{% extends "base_admin.html" %}

{# Leht näitab kategooriate listi #}

{% block content %}
    <div>
        <div id="success-message" class="mt-3"> {# Näitab teadet 3 sekundit vt js all #}
            {% if messages %} {# kui teade on olemas siis näitab, vt CategoryDeleteView #}
                <ul class="messages">
                    {% for message in messages %}
                        <div{% if message.tags %}
                                class="{{ message.tags }} alert alert-danger"
                            {% endif %}>{{ message }}
                        </div>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <div class="mt-3">
        <table>
            <thead>
            <tr>
                <th>Kategooria</th>
                <th>Jnr</th>
            </tr>
            </thead>
            <tbody>
            {% for category in categories %}
                <tr>
                    <td>{{ category.category_name }}</td>
                    <td>{{ category.category_sort_id }}</td>
                    <td><a href="{% url "bistrooapp_admin:category_update" pk=category.id %}">Muuda</a></td>
                    <td><a href="{% url "bistrooapp_admin:category_delete" pk=category.id %}" class="text-danger">Kustuta</a></td>
                </tr>

            {% endfor %}

            </tbody>
        </table>
        <p></p>
        <a href="{% url "bistrooapp_admin:category_create" %}">Lisa kategooria</a>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Display the message
            var messageElement = document.getElementById("success-message");
            messageElement.style.display = "block";

            // Set a timeout to hide the message after 10 seconds (10000 milliseconds)
            setTimeout(function () {messageElement.style.display = "none";}, 3000); // 10000 milliseconds = 10 seconds
        });
    </script>


{% endblock %}